#!/usr/bin/python


# Scipt for the power spectral density measurement using USRP1
# Author: Bilal Parvez

import os
import scipy
import numpy as np

# To execute the gnu radio scipt in a shell

n = [2412000000 ,2417000000 ,2422000000,2427000000,2432000000,2437000000,2442000000,2447000000,2422000000,2452000000,2457000000]   #for the sampling array
values = [] # array to hold the frequency values

for items in n:
    #argument1 = str(items)

    cmdstring = "./uhd_fft.py -f %s" %(items) # type casting items so that it can be used for os.system call
    os.system(cmdstring) # running the script on the system terminal
    #   os.system('clear')  #clear the terminal
    print 'Done executing script'
    # A one line python command to read the entire file into a numpy array

    f = scipy.fromfile(open("value"), dtype=scipy.float32)  # file value is the file generated by the gnu radios scripts file sink block
    f = np.mean(f)

    values.append(f) # Putting values in an array to print at the end

os.system('clear')  #clear the terminal

for i in range(0,len(n)):
    print "for" , n[i] ,":" , values[i]   # to print the values of the fft , need to figure this out further, what the values is and so forth


#Rest of the psuedo code

#Take value of the first 10 Mhz segment, save in an array , do the same for the rest of the spectrum

# Figure out a way commute the total in the end
